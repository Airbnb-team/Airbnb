<%= javascript_include_tag "button_action.js" %>
<%= javascript_include_tag "dropdown.js" %>
<header class="toppage-header">
  <button type="button" class="toppage-header-btn">
    <%= render partial: 'shared/airbnb-icon' %>
  </button>
  <div class="toppage-header-left">
    <%= form_tag search_rooms_path, method: :get do %>
      <div class="input-group">
        <%= text_field_tag :search, params[:keyword], class: 'toppage-serach-field', placeholder: '  Search', id: "autolocation2" %>
      </div>
    <% end %>
  </div>
  <div class="toppage-header-right">
    <% if user_signed_in? && current_user.rooms %>
      <div class="js_dropmenu">
        <span class="parent">ホスト
          <div class="js_dropmenu_child">
            <div class="js_dropdown_item">
              <%= link_to 'ホスティング用ダッシュボード', dashboard_rooms_path(current_user), class:'js_dropdown_item_content' %>
            </div>
          </div>
        </span>
      </div>
      <div class="js_dropmenu">
        <span class="parent">お気に入り
          <div class="js_dropmenu_child">
            <div class="js_dropdown_item">
              <%= link_to 'お気に入り一覧を見る', room_favorites_path(current_user), class:'js_dropdown_item_content' %>
            </div>
          </div>
        </span>
      </div>
      <div class="js_dropmenu">
        <span class="parent">メッセージ
          <div class="js_dropmenu_child">
            <div class="js_dropdown_item">
              <%= link_to 'メッセージ', groups_path, class:'js_dropdown_item_content' %>
            </div>
            <div class="js_dropdown_item">
              <%= link_to '通知', '/', class:'js_dropdown_item_content' %>
            </div>
          </div>
        </span>
      </div>
      <div class="js_dropmenu">
        <span class="parent toppage-avator">
          <img alt="" height="28" src="https://a0.muscache.com/defaults/user_pic-50x50.png?v=3" width="28">
          <div class="js_dropmenu_child">
            <div class="js_dropdown_item">
              <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class:'js_dropdown_item_content' %>
            </div>
          </div>
        </span>
      </div>
    <% elsif user_signed_in? %>
      <%= button_tag type: 'button', onclick: "link_to('#{introduce_rooms_path(current_user)}')", class:'toppage-become-host-btn' do %>
        <span>ホストをはじめる</span>
      <% end %>
      <div class="js_dropmenu">
        <span class="parent">メッセージ
          <div class="js_dropmenu_child">
            <div class="js_dropdown_item">
              <%= link_to 'メッセージ', '/', class:'js_dropdown_item_content' %>
            </div>
            <div class="js_dropdown_item">
              <%= link_to '通知', '/', class:'js_dropdown_item_content' %>
            </div>
          </div>
        </span>
      </div>
      <div class="toppage-header-content">
        <%= link_to 'アカウント作成', edit_user_registration_path, method: :post, style: "color:#484848;" %>
      </div>
      <div class="toppage-header-content">
        <%= link_to "ログアウト", destroy_user_session_path, method: :delete, style: "color:#484848;" %>
      </div>
      <%= link_to("/users/#{current_user.id}/edit") do %>
        <div class="toppage-header-content">
          <div class="toppage-avator">
            <img alt="" height="28" src="https://a0.muscache.com/defaults/user_pic-50x50.png?v=3" width="28">
          </div>
        </div>
      <% end %>
      </div>
    <% else %>
      <div class="toppage-header-content">
        <%= link_to "ログイン", new_user_session_path, method: :post, style: "color:#484848;" %>
      </div>
    <% end %>
  </div>
</header>
  